# TIC80Node的类对象

**描述：**

&emsp;&emsp;用于创建 TIC80Node 实例的类。

## __call

**类型：** 元方法。

**描述：**

&emsp;&emsp;构造函数，用于创建一个 TIC80Node 实例。

**签名：**
```tl
metamethod __call: function(
		self: TIC80NodeClass,
		cartFile: string
	): TIC80Node | nil
```

**参数：**

| 参数名 | 类型 | 描述 |
| --- | --- | --- |
| cartFile | string | TIC-80 卡带文件路径。应为有效的 TIC-80 卡带文件（`.tic` 或 `.png` 格式）。<br/>TIC-80 卡带文件包含将在 TIC-80 虚拟机中运行的完整游戏或程序。<br/>支持的功能：<br/>- 完整的 TIC-80 API 支持（绘制、声音、输入等）。<br/>- 键盘、手柄和触摸输入处理。<br/>- 通过 TIC-80 声音引擎进行音频播放。<br/>- 以 TIC-80 原生分辨率运行（240x136 像素）。<br/>- 固定帧率，匹配 TIC-80 规范（60 FPS）。 |

**返回值：**

| 返回类型 | 描述 |
| --- | --- |
| TIC80Node \| nil | 新创建的 TIC80Node 实例。如果创建失败，则返回 nil。 |

## __call

**类型：** 元方法。

**描述：**

&emsp;&emsp;构造函数，用于创建一个 TIC80Node 实例，从代码文件加载代码，从卡带文件加载美术和音频资源。

**签名：**
```tl
metamethod __call: function(
		self: TIC80NodeClass,
		resourceCartFile: string,
		codeFile: string
	): TIC80Node | nil
```

**参数：**

| 参数名 | 类型 | 描述 |
| --- | --- | --- |
| resourceCartFile | string | 包含美术和音频资源的 TIC-80 卡带文件路径（`.tic` 或 `.png` 格式）。 |
| codeFile | string | 代码文件路径（例如：`.lua`、`.yue`）。 |

**返回值：**

| 返回类型 | 描述 |
| --- | --- |
| TIC80Node \| nil | 新创建的 TIC80Node 实例。如果创建失败，则返回 nil。 |

## codeFromCart

**类型：** 函数。

**描述：**

&emsp;&emsp;从 TIC-80 卡带文件中提取代码文本。

**签名：**
```tl
codeFromCart: function(self: TIC80NodeClass, cartFile: string): string
```

**参数：**

| 参数名 | 类型 | 描述 |
| --- | --- | --- |
| cartFile | string | TIC-80 卡带文件路径（`.tic` 或 `.png` 格式）。 |

**返回值：**

| 返回类型 | 描述 |
| --- | --- |
| string | 提取的代码文本，如果失败则返回空字符串。 |

## mergeTic

**类型：** 函数。

**描述：**

&emsp;&emsp;合并资源卡带和代码文件为 .tic 卡带文件。

**签名：**
```tl
mergeTic: function(self: TIC80NodeClass, outputFile: string, resourceCartFile: string, codeFile: string): boolean
```

**参数：**

| 参数名 | 类型 | 描述 |
| --- | --- | --- |
| outputFile | string | 保存合并后的 .tic 卡带文件的路径。 |
| resourceCartFile | string | 资源卡带文件路径。 |
| codeFile | string | 代码文件路径。 |

**返回值：**

| 返回类型 | 描述 |
| --- | --- |
| boolean | 成功返回 true，否则返回 false。 |

## mergePng

**类型：** 函数。

**描述：**

&emsp;&emsp;合并 PNG 封面、资源卡带和可选的代码文件为 .png 卡带文件。

**签名：**
```tl
mergePng: function(self: TIC80NodeClass, outputFile: string, coverPngFile: string, resourceCartFile: string, codeFile?: string): boolean
```

**参数：**

| 参数名 | 类型 | 描述 |
| --- | --- | --- |
| outputFile | string | 保存合并后的 .png 卡带文件的路径。 |
| coverPngFile | string | 封面 PNG 图片文件路径。 |
| resourceCartFile | string | 资源卡带文件路径。 |
| codeFile | string | [可选] 代码文件路径。如果为空，则使用资源卡带中的代码。 |

**返回值：**

| 返回类型 | 描述 |
| --- | --- |
| boolean | 成功返回 true，否则返回 false。 |